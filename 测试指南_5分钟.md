# 🧪 5 分钟快速测试指南

## 准备工作 ✅

1. ✅ 服务器已启动 (http://localhost:3000)
2. ✅ 数据库已连接
3. ✅ 所有修复已应用

## 测试步骤

### 第 1 步：测试连续打卡 (1 分钟)

**发送到 WhatsApp**:
```
streak
```

**预期看到**:
```
🔥 您的连续打卡

📊 当前连续: X 天
🏆 最长连续: X 天
🍽️ 总餐数: X
❄️ 冻结次数: X 次可用

继续记录保持连续！💪
```

✅ 如果看到这个响应 → 连续打卡功能正常！

---

### 第 2 步：测试预算追踪 (2 分钟)

**2.1 查看预算状态**

发送:
```
budget
```

预期看到:
```
💰 预算追踪

预算追踪当前已禁用。

要启用，发送：
budget set 1800（您的每日卡路里目标）
```

**2.2 设置预算**

发送:
```
budget set 1800
```

预期看到:
```
✅ 每日预算设置为 1800 千卡！

我会追踪您的卡路里并在接近限制时提醒您。
```

**2.3 再次查看预算**

发送:
```
budget
```

预期看到:
```
💰 今日预算

🟢 0 / 1800 千卡 (0%)
✅ 剩余 1800 千卡

命令：
• budget set 2000 - 更改目标
• budget disable - 关闭追踪
```

✅ 如果三个步骤都正常 → 预算追踪功能正常！

---

### 第 3 步：测试偏好设置 (1 分钟)

**发送到 WhatsApp**:
```
preferences
```

**预期看到**:
```
⚙️ 您的偏好

还没有设置偏好。

要更新，直接告诉我：
"我是素食者" 或 "我对花生过敏"

我会在您使用时学习您的偏好！🎯
```

✅ 如果看到这个响应 → 偏好管理功能正常！

---

### 第 4 步：测试中文命令 (1 分钟)

**发送到 WhatsApp**:
```
连续
```

**预期**: 看到连续打卡统计（中文版本）

**发送到 WhatsApp**:
```
预算
```

**预期**: 看到预算状态（中文版本）

**发送到 WhatsApp**:
```
偏好
```

**预期**: 看到偏好设置（中文版本）

✅ 如果三个中文命令都正常 → 多语言支持正常！

---

### 第 5 步：测试餐食记录集成 (可选)

**发送食物照片到 WhatsApp**

**预期看到**:
1. 正常的食物识别和营养分析
2. 如果是新的一天，连续天数会更新
3. 预算消耗会更新（显示已用 XXX / 1800 kcal）

✅ 如果看到预算更新 → 集成功能正常！

---

## 快速检查清单

```
□ streak 命令有响应
□ budget 命令有响应
□ budget set 1800 设置成功
□ preferences 命令有响应
□ 连续 (中文) 有响应
□ 预算 (中文) 有响应
□ 偏好 (中文) 有响应
□ 发送食物照片后预算更新
```

## 如果遇到问题

### 问题 1: 命令没有响应

**检查**:
1. 服务器是否在运行？
   ```bash
   # 检查进程
   Get-Process | Where-Object {$_.ProcessName -like "*node*"}
   ```

2. 查看服务器日志
   ```bash
   # 查看最近的日志
   Get-Content .next/server/app/api/webhook/route.js.nft.json
   ```

### 问题 2: 响应是英文而不是中文

**原因**: 语言检测可能识别为英文

**解决**: 这是正常的，系统会根据您的消息历史自动调整语言

### 问题 3: 预算没有更新

**检查**:
1. 是否设置了预算？（发送 `budget` 确认）
2. 是否发送了食物照片？（不是文字）
3. 食物是否被成功识别？

## 成功标志

如果您看到：
- ✅ 所有命令都有正确的响应
- ✅ 中文和英文命令都能工作
- ✅ 预算设置和查询都正常
- ✅ 发送食物照片后预算会更新

**恭喜！Phase 3 核心功能完全正常！** 🎉

---

## 额外测试（可选）

### 测试成就系统

连续记录 3 天餐食，应该会解锁 "3 天连续" 成就

### 测试预算警告

1. 设置预算为 500 kcal
2. 发送高热量食物照片
3. 应该会看到预算警告

### 测试过敏检测

1. 告诉机器人 "I'm allergic to peanuts"
2. 发送含花生的食物照片
3. 应该会看到过敏警告

---

**预计测试时间**: 5-10 分钟
**必需测试**: 前 4 步
**可选测试**: 第 5 步 + 额外测试

祝测试顺利！🚀
