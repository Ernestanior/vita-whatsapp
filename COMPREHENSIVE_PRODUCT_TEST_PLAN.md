# Vita AI 产品全面测试计划

## 📋 产品功能总结

### 核心功能（Phase 1-2）

1. **食物识别与分析**
   - 拍照识别食物
   - 计算营养成分（卡路里、蛋白质、碳水、脂肪）
   - 健康评分（绿/黄/红）
   - 个性化建议

2. **健康画像管理**
   - 快速设置（3个数字：年龄 身高 体重）
   - 自然语言更新（"我现在65kg"）
   - 性别识别（"我是女的"）
   - 目标设置（减脂/增肌/控糖/维持）

3. **统计与历史**
   - 查看餐食历史
   - 营养统计分析
   - 健康评分趋势

### Phase 3 功能（个性化与游戏化）

4. **连续打卡系统**
   - 追踪连续记录天数
   - 成就系统（3天、7天、30天等）
   - 连续冻结机制
   - 最长连续记录

5. **每日预算追踪**
   - 设置每日卡路里目标
   - 实时追踪消耗
   - 80%警告、100%+支持性消息
   - 30天历史记录

6. **偏好管理**
   - 自动识别饮食类型（素食、纯素、生酮等）
   - 过敏原检测和警告
   - 自动学习最爱食物
   - 个性化建议

7. **智能对话系统**
   - 上下文理解
   - 主动推理
   - 记住用户信息
   - 个性化回复

8. **多语言支持**
   - 英文
   - 简体中文
   - 繁体中文
   - 新加坡华语风格

---

## 🧪 真实场景测试用例

### 场景 1: 新用户首次使用

#### 测试用例 1.1: 零输入快速开始
**用户行为**: 直接发送食物照片，不做任何设置

**测试步骤**:
```
1. 发送一张鸡肉饭照片
```

**预期结果**:
- ✅ 识别食物
- ✅ 显示营养成分
- ✅ 给出健康评分
- ✅ 提供基础建议
- ✅ 提示可以设置个人资料获得更好建议

**真实问题**:
- "我什么都没设置，它能用吗？"
- "我不想填一堆表格"

---

#### 测试用例 1.2: 快速设置
**用户行为**: 想快速设置但不知道怎么做

**测试步骤**:
```
1. 发送: "我想设置一下"
2. 发送: "25 170 65"
```

**预期结果**:
- ✅ 理解用户想设置
- ✅ 引导用户发送3个数字
- ✅ 自动识别为年龄、身高、体重
- ✅ 计算BMI
- ✅ 推荐目标
- ✅ 确认设置成功

**真实问题**:
- "我不知道要填什么"
- "能不能简单点？"

---

### 场景 2: 日常使用 - 早餐

#### 测试用例 2.1: 早餐记录
**用户行为**: 早上吃了早餐，想记录

**测试步骤**:
```
1. 7:30 AM - 发送早餐照片（燕麦粥 + 水果）
```

**预期结果**:
- ✅ 识别食物
- ✅ 显示营养成分
- ✅ 如果是新的一天，更新连续天数
- ✅ 更新预算消耗（如果设置了预算）
- ✅ 给出早餐建议

**真实问题**:
- "我每天早上都吃，它会记住吗？"
- "它知道这是早餐吗？"

---

#### 测试用例 2.2: 询问早餐建议
**用户行为**: 想知道早餐吃什么好

**测试步骤**:
```
1. 发送: "早餐吃什么好？"
2. 发送: "我想减肥"
```

**预期结果**:
- ✅ 理解用户想要早餐建议
- ✅ 基于用户目标（减肥）提供建议
- ✅ 考虑用户的饮食偏好
- ✅ 提供具体食物建议

**真实问题**:
- "它能给我建议吗？"
- "它知道我想减肥吗？"

---

### 场景 3: 特殊饮食需求

#### 测试用例 3.1: 素食者
**用户行为**: 用户是素食者，想让系统知道

**测试步骤**:
```
1. 发送: "我不吃肉"
2. 发送: "我只吃素"
3. 发送: "我是素食者"
4. 发送鸡肉照片
5. 发送: "preferences"
```

**预期结果**:
- ✅ 理解用户是素食者
- ✅ 自动保存偏好
- ✅ 提供素食建议
- ✅ 当用户发送肉类照片时提醒
- ✅ preferences命令显示素食偏好

**真实问题**:
- "我说了我不吃肉，它记住了吗？"
- "如果我不小心拍了肉，它会提醒我吗？"

---

#### 测试用例 3.2: 过敏
**用户行为**: 用户对花生过敏

**测试步骤**:
```
1. 发送: "我对花生过敏"
2. 发送含花生的食物照片
3. 发送: "preferences"
```

**预期结果**:
- ✅ 理解并保存过敏信息
- ✅ 当检测到花生时显示警告
- ✅ 提供替代建议
- ✅ preferences命令显示过敏信息

**真实问题**:
- "它能记住我的过敏吗？"
- "如果我吃了过敏的东西，它会警告我吗？"

---

#### 测试用例 3.3: 糖尿病
**用户行为**: 用户有糖尿病，需要控糖

**测试步骤**:
```
1. 发送: "我有糖尿病"
2. 发送: "我需要控制血糖"
3. 发送高糖食物照片
```

**预期结果**:
- ✅ 理解用户需要控糖
- ✅ 提供控糖建议
- ✅ 当检测到高糖食物时警告
- ✅ 推荐低GI食物

**真实问题**:
- "我说了我有糖尿病，它能理解吗？"
- "它会帮我控制血糖吗？"

---

### 场景 4: 预算管理

#### 测试用例 4.1: 设置预算
**用户行为**: 想控制每日卡路里摄入

**测试步骤**:
```
1. 发送: "budget"
2. 发送: "budget set 1800"
3. 发送: "budget"
4. 发送食物照片（500 kcal）
5. 发送: "budget"
```

**预期结果**:
- ✅ 第一次显示未设置
- ✅ 设置成功确认
- ✅ 显示 0/1800 kcal
- ✅ 记录后显示 500/1800 kcal
- ✅ 显示剩余1300 kcal

**真实问题**:
- "我想控制卡路里，怎么设置？"
- "它会帮我追踪吗？"

---

#### 测试用例 4.2: 接近预算限制
**用户行为**: 一天快结束了，快超预算了

**测试步骤**:
```
1. 设置预算 1800 kcal
2. 发送多张食物照片，累计 1500 kcal
3. 发送: "budget"
4. 发送食物照片（400 kcal）
```

**预期结果**:
- ✅ 显示 1500/1800 (83%)
- ✅ 显示警告："接近限制"
- ✅ 超预算后显示支持性消息
- ✅ 不是责备，而是鼓励

**真实问题**:
- "如果我超了，它会骂我吗？"
- "它会提醒我吗？"

---

### 场景 5: 连续打卡

#### 测试用例 5.1: 查看连续
**用户行为**: 想知道自己连续记录了多少天

**测试步骤**:
```
1. 发送: "streak"
2. 发送: "连续"
3. 发送: "我打卡多少天了"
```

**预期结果**:
- ✅ 显示当前连续天数
- ✅ 显示最长连续记录
- ✅ 显示总餐数
- ✅ 显示可用的连续冻结次数
- ✅ 显示最近获得的成就

**真实问题**:
- "我连续记录了多久？"
- "有什么奖励吗？"

---

#### 测试用例 5.2: 成就解锁
**用户行为**: 连续记录达到里程碑

**测试步骤**:
```
1. 连续3天记录餐食
2. 第3天发送食物照片
3. 发送: "streak"
```

**预期结果**:
- ✅ 解锁"3天连续"成就
- ✅ 显示庆祝消息
- ✅ 鼓励继续保持

**真实问题**:
- "有成就系统吗？"
- "我能看到我的进步吗？"

---

### 场景 6: 自然对话

#### 测试用例 6.1: 随意聊天
**用户行为**: 想随便聊聊

**测试步骤**:
```
1. 发送: "你好"
2. 发送: "你是谁"
3. 发送: "你能做什么"
```

**预期结果**:
- ✅ 友好回应
- ✅ 介绍自己
- ✅ 说明功能
- ✅ 引导用户使用

**真实问题**:
- "这是个机器人吗？"
- "它能聊天吗？"

---

#### 测试用例 6.2: 复杂问题
**用户行为**: 问一个需要理解上下文的问题

**测试步骤**:
```
1. 发送: "我想增肌"
2. 发送: "但是我不吃肉"
3. 发送: "我应该吃什么"
```

**预期结果**:
- ✅ 理解用户想增肌
- ✅ 记住用户不吃肉
- ✅ 提供素食增肌建议
- ✅ 推荐高蛋白植物食物

**真实问题**:
- "它能理解我的复杂需求吗？"
- "它会记住我之前说的话吗？"

---

### 场景 7: 多语言切换

#### 测试用例 7.1: 语言自动检测
**用户行为**: 用不同语言交流

**测试步骤**:
```
1. 发送: "Hello"
2. 发送: "你好"
3. 发送: "I want to lose weight"
4. 发送: "我想减肥"
```

**预期结果**:
- ✅ 自动检测英文，用英文回复
- ✅ 自动检测中文，用中文回复
- ✅ 保持语言一致性
- ✅ 新加坡华语风格（lah, leh）

**真实问题**:
- "我可以用中文吗？"
- "它支持多语言吗？"

---

### 场景 8: 错误处理

#### 测试用例 8.1: 模糊照片
**用户行为**: 发送了一张模糊的食物照片

**测试步骤**:
```
1. 发送模糊的食物照片
```

**预期结果**:
- ✅ 尝试识别
- ✅ 如果无法识别，礼貌地说明
- ✅ 建议重新拍照
- ✅ 给出拍照技巧

**真实问题**:
- "如果照片不清楚怎么办？"
- "它会识别失败吗？"

---

#### 测试用例 8.2: 非食物照片
**用户行为**: 不小心发送了非食物照片

**测试步骤**:
```
1. 发送一张风景照片
2. 发送一张人物照片
```

**预期结果**:
- ✅ 识别这不是食物
- ✅ 礼貌地说明
- ✅ 引导用户发送食物照片

**真实问题**:
- "如果我发错了怎么办？"
- "它会识别错吗？"

---

#### 测试用例 8.3: 无法理解的输入
**用户行为**: 发送了系统无法理解的内容

**测试步骤**:
```
1. 发送: "asdfghjkl"
2. 发送: "🤔🤔🤔"
```

**预期结果**:
- ✅ 礼貌地说不理解
- ✅ 提供帮助选项
- ✅ 引导用户使用功能

**真实问题**:
- "如果它听不懂怎么办？"
- "会不会卡住？"

---

### 场景 9: 命令使用

#### 测试用例 9.1: 命令发现
**用户行为**: 不知道有什么命令

**测试步骤**:
```
1. 发送: "help"
2. 发送: "帮助"
3. 发送: "你能做什么"
```

**预期结果**:
- ✅ 显示所有可用命令
- ✅ 简短说明每个命令
- ✅ 提供快速操作按钮

**真实问题**:
- "有什么命令？"
- "怎么用？"

---

#### 测试用例 9.2: 命令变体
**用户行为**: 用不同方式表达同一个命令

**测试步骤**:
```
1. 发送: "streak"
2. 发送: "连续"
3. 发送: "打卡"
4. 发送: "我打卡多少天了"
5. 发送: "查看我的连续记录"
```

**预期结果**:
- ✅ 所有方式都能识别
- ✅ 返回相同的连续信息
- ✅ 自然语言也能理解

**真实问题**:
- "我必须记住准确的命令吗？"
- "能不能用自然语言？"

---

### 场景 10: 长期使用

#### 测试用例 10.1: 一周后
**用户行为**: 使用了一周，想看进步

**测试步骤**:
```
1. 连续使用7天
2. 发送: "stats"
3. 发送: "history"
4. 发送: "streak"
```

**预期结果**:
- ✅ 显示7天统计
- ✅ 显示平均营养摄入
- ✅ 显示健康评分趋势
- ✅ 显示7天连续成就
- ✅ 鼓励继续保持

**真实问题**:
- "我能看到我的进步吗？"
- "有什么变化？"

---

#### 测试用例 10.2: 断连后恢复
**用户行为**: 中断了几天，重新开始

**测试步骤**:
```
1. 连续使用5天
2. 停止3天
3. 重新发送食物照片
4. 发送: "streak"
```

**预期结果**:
- ✅ 欢迎回来
- ✅ 显示连续已重置
- ✅ 保留最长连续记录
- ✅ 鼓励重新开始
- ✅ 不责备

**真实问题**:
- "如果我断了怎么办？"
- "我的记录会丢吗？"

---

## 🎯 测试执行计划

### 阶段 1: 基础功能测试（30分钟）
- 场景 1: 新用户首次使用
- 场景 2: 日常使用
- 场景 9: 命令使用

### 阶段 2: 高级功能测试（30分钟）
- 场景 3: 特殊饮食需求
- 场景 4: 预算管理
- 场景 5: 连续打卡

### 阶段 3: 智能对话测试（20分钟）
- 场景 6: 自然对话
- 场景 7: 多语言切换

### 阶段 4: 边界情况测试（20分钟）
- 场景 8: 错误处理
- 场景 10: 长期使用

---

## 📊 测试评分标准

### 功能完整性（40分）
- ✅ 所有核心功能可用
- ✅ 所有Phase 3功能可用
- ✅ 命令识别准确

### 用户体验（30分）
- ✅ 响应速度快
- ✅ 回复友好自然
- ✅ 错误处理优雅

### 智能程度（20分）
- ✅ 理解上下文
- ✅ 记住用户信息
- ✅ 主动推理

### 稳定性（10分）
- ✅ 不崩溃
- ✅ 不重复消息
- ✅ 数据持久化

---

## 🚀 开始测试

现在我将作为测试员，逐个执行这些测试用例。

您想让我：
1. 全部自动执行（创建测试脚本）
2. 逐个手动测试（通过真实WhatsApp）
3. 先执行关键场景（场景1、2、3、4、5）

请告诉我您的选择！
